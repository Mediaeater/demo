<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ötzi - Modern</title>
    <style>
        /* Modern, Clean CSS */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f9f9f9;
            color: #444;
            line-height: 1.6;
        }

        .container {
            max-width: 900px; /* Increased width */
            margin: 30px auto;
            background-color: #fff;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
        }

        h1, h2 {
            text-align: center;
            color: #2ecc71; /* Vibrant Green */
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #555;
        }

        input[type="text"],
        textarea,
        select {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            box-sizing: border-box;
            margin-bottom: 10px;
            font-size: 16px;
            color: #444;
        }

        textarea {
            height: 120px;
        }

        select {
            appearance: none; /* Remove default arrow */
            background-image: url('data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/></svg>');
            background-repeat: no-repeat;
            background-position: right 12px center;
            background-size: 16px;
        }

        button {
            background-color: #2ecc71; /* Vibrant Green */
            color: #fff;
            padding: 14px 24px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 18px;
            transition: background-color 0.2s ease;
        }

        button:hover {
            background-color: #27ae60;
        }

        .suggestion {
            background-color: #f0fdf4;
            padding: 12px;
            border: 1px solid #bbf7d0;
            border-radius: 6px;
            margin-top: 10px;
            font-size: 1em;
            color: #4a5568;
        }

        .progress-bar {
            width: 100%;
            background-color: #edf2f7;
            border-radius: 6px;
            height: 24px;
            margin-bottom: 20px;
            overflow: hidden;
        }

        .progress-bar-fill {
            background-color: #2ecc71;
            height: 100%;
            width: 0%;
            transition: width 0.4s ease;
        }

        .hidden {
            display: none;
        }

        /* Story Helper Button and Panel */
        #story-helper-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: #3498db;
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            z-index: 100; /* Ensure it stays on top */
        }

        #story-helper-button:hover {
            background-color: #2980b9;
        }

        #story-helper-panel {
            position: fixed;
            top: 0;
            right: 0;
            width: 300px;
            height: 100%;
            background-color: #fff;
            box-shadow: -2px 0 5px rgba(0, 0, 0, 0.1);
            padding: 20px;
            transform: translateX(100%); /* Hidden by default */
            transition: transform 0.3s ease;
            z-index: 101;
            overflow-y: auto; /* Allow scrolling if content is too long */
        }

        #story-helper-panel.open {
            transform: translateX(0); /* Show the panel */
        }

        #story-helper-panel h3 {
            color: #3498db;
            margin-bottom: 15px;
        }

        #story-helper-panel button {
            display: block;
            width: 100%;
            margin-bottom: 10px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            background-color: #f9f9f9;
            color: #333;
            text-align: left;
            cursor: pointer;
        }

        #story-helper-panel button:hover {
            background-color: #eee;
        }

        #close-helper-panel {
            position: absolute;
            top: 10px;
            right: 10px;
            background: none;
            border: none;
            font-size: 20px;
            color: #777;
            cursor: pointer;
        }

        /* Storyboard Area */
        #storyboard-area {
            margin-top: 30px;
            padding: 20px;
            border: 1px dashed #ccc;
            border-radius: 8px;
            text-align: center;
            font-style: italic;
            color: #888;
        }
        /* Add a class to style the active question button */
        .question-button.active {
            background-color: #27ae60; /* Darker green for active */
        }
        /* Horizontal Navigation */
        .horizontal-nav {
            display: flex;
            justify-content: center; /* Center the buttons */
            gap: 10px; /* Space between buttons */
            margin-bottom: 20px;
        }

        .horizontal-nav button {
            /* Style the navigation buttons to look different from main buttons */
            background-color: #f0f0f0; /* Light grey background */
            color: #333;
            padding: 10px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s ease;
        }

        .horizontal-nav button:hover {
            background-color: #ddd; /* Darker grey on hover */
        }

    </style>
</head>
<body>

    <div class="container">
        <h1>Story Spark</h1>

        <div id="welcome-section">
            <h2>Let's Get Started!</h2>
            <div class="form-group">
                <label for="genre">Genre:</label>
                <select id="genre">
                    <option value="fantasy">Fantasy</option>
                    <option value="sci-fi">Sci-Fi</option>
                    <option value="mystery">Mystery</option>
                    <option value="romance">Romance</option>
                    <option value="thriller">Thriller</option>
                    <option value="horror">Horror</option>
                </select>
            </div>
            <div class="form-group">
                <label for="targetAudience">Target Audience:</label>
                <select id="targetAudience">
                    <option value="young-adult">Young Adult</option>
                    <option value="adult">Adult</option>
                </select>
            </div>
            <button onclick="showQuestion(1)">Begin Story Creation!</button>
        </div>


        <div id="progress-bar" class="progress-bar hidden">
            <div class="progress-bar-fill" id="progress-bar-fill"></div>
        </div>

        <div class="horizontal-nav hidden" id="question-nav">
            <button class="question-button" onclick="showQuestion(1)" data-question="1">Character</button>
            <button class="question-button" onclick="showQuestion(2)" data-question="2">Goal</button>
            <button class="question-button" onclick="showQuestion(3)" data-question="3">Setting</button>
            <button class="question-button" onclick="showQuestion(4)" data-question="4">Time Period</button>
            <button class="question-button" onclick="showQuestion(5)" data-question="5">Theme</button>
        </div>


        <!-- Question 1: Characters -->
        <div id="question1" class="hidden">
            <h2>Characters</h2>
            <div class="form-group">
                <label for="characterName">Character Name:</label>
                <input type="text" id="characterName" name="characterName">
            </div>
            <div class="form-group">
                <label for="characterDescription">Character Description:</label>
                <textarea id="characterDescription" name="characterDescription"></textarea>
            </div>
            <div class="form-group">
                <label for="characterMotivation">Character Motivation:</label>
                <input type="text" id="characterMotivation" name="characterMotivation">
            </div>
            <div class="form-group">
                <label for="characterWeakness">Character Weakness:</label>
                <input type="text" id="characterWeakness" name="characterWeakness">
            </div>
            <div class="suggestion">
                <!-- AI Suggestion -->
                Based on the chosen genre, consider a character struggling with inner turmoil. The character should model safe behavior.
            </div>
            <button onclick="showQuestion(2)">Next Question</button>
        </div>

        <!-- Question 2: Goal/Desire -->
        <div id="question2" class="hidden">
            <h2>Goal/Desire</h2>
            <div class="form-group">
                <label for="goal">What do they want?</label>
                <input type="text" id="goal" name="goal">
            </div>
            <div class="suggestion">
                <!-- AI Suggestion -->
                In this genre, consider a goal related to uncovering a hidden truth, but emphasize safety during the process.
            </div>
            <button onclick="showQuestion(3)">Next Question</button>
        </div>

        <!-- Question 3: Setting -->
        <div id="question3" class="hidden">
            <h2>Setting</h2>
            <div class="form-group">
                <label for="setting">Where does the story take place?</label>
                <input type="text" id="setting" name="setting">
            </div>
            <div class="suggestion">
                <!-- AI Suggestion -->
                Consider a setting with contrasting elements for added depth, ensure all settings are safe for the user.
            </div>
            <button onclick="showQuestion(4)">Next Question</button>
        </div>

        <!-- Question 4: Time Period/Era -->
        <div id="question4" class="hidden">
            <h2>Time Period/Era</h2>
            <div class="form-group">
                <label for="era">When does the story take place?</label>
                <input type="text" id="era" name="era">
            </div>
            <div class="suggestion">
                <!-- AI Suggestion -->
                This genre might be enhanced by a time period of great societal change, ensuring every thing is safe and secure.
            </div>
            <button onclick="showQuestion(5)">Next Question</button>
        </div>

        <!-- Question 5: Theme/Message -->
        <div id="question5" class="hidden">
            <h2>Theme/Message</h2>
            <div class="form-group">
                <label for="theme">Why is this story important?</label>
                <input type="text" id="theme" name="theme">
            </div>
            <div class="suggestion">
                <!-- AI Suggestion -->
                Explore the theme of resilience in the face of adversity, ensure the user knows the dangers and can avoid them.
            </div>
            <button onclick="showOutline()">Create Outline</button>
        </div>

        <!-- Outline Section -->
        <div id="outline-section" class="hidden">
            <h2>Story Outline</h2>
            <div id="outline-content">
                <!-- Dynamically generated outline content goes here -->
            </div>
            <button onclick="editOutline()">Edit Outline</button>
             <!-- Display Storyboard -->
            <div id="storyboard-area">
                Storyboard will appear here... (Integration needed)
            </div>
        </div>

        <!-- Story Helper Panel -->
        <div id="story-helper-panel">
            <button id="close-helper-panel">×</button>
            <h3>Story Helper</h3>
            <p>Need some help? Choose a topic below:</p>
            <button onclick="askHelper('character')">Character Development</button>
            <button onclick="askHelper('plot')">Plot Twists</button>
            <button onclick="askHelper('setting')">Setting Ideas</button>
            <button onclick="askHelper('theme')">Theme Exploration</button>
        </div>

    </div>
    <button id="story-helper-button">Ask a Story Helper</button>

    <script>
        let currentQuestion = 0;
        let totalQuestions = 5;
        const questionButtons = document.querySelectorAll('.question-button');

        // Function to activate the current question button
        function activateQuestionButton(questionNumber) {
            questionButtons.forEach(button => {
                button.classList.remove('active');
                if (button.dataset.question == questionNumber) {
                    button.classList.add('active');
                }
            });
        }
        function showQuestion(questionNumber) {
            // Hide the current question
            if (currentQuestion > 0) {
                document.getElementById("question" + currentQuestion).classList.add("hidden");
            } else {
                document.getElementById("welcome-section").classList.add("hidden");
            }

            // Show the next question
            document.getElementById("question" + questionNumber).classList.remove("hidden");
            currentQuestion = questionNumber;

            // Update the progress bar
            updateProgressBar();

            // Show the navigation buttons
            document.getElementById("question-nav").classList.remove("hidden");

            document.getElementById("progress-bar").classList.remove("hidden");

            // Activate the current question button
            activateQuestionButton(questionNumber);
        }

        function updateProgressBar() {
            let progressPercentage = (currentQuestion / totalQuestions) * 100;
            document.getElementById("progress-bar-fill").style.width = progressPercentage + "%";
        }

        function showOutline() {
            if (currentQuestion > 0) {
                document.getElementById("question" + currentQuestion).classList.add("hidden");
            } else {
                document.getElementById("welcome-section").classList.add("hidden");
            }

            // Get input values
            let characterName = document.getElementById("characterName").value;
            let goal = document.getElementById("goal").value;
            let setting = document.getElementById("setting").value;
            let era = document.getElementById("era").value;
            let theme = document.getElementById("theme").value;

            // Basic Outline
            let outlineHTML = `
                <h3>Act I: Introduction</h3>
                <p>We meet ${characterName} in ${setting} during the ${era} era.  Their goal is to ${goal}.</p>
                <h3>Act II: Rising Action</h3>
                <p>${characterName} faces challenges and obstacles in pursuit of their goal.</p>
                <h3>Act III: Climax & Resolution</h3>
                <p>The story culminates in a final confrontation that resolves the main conflict, exploring the theme of ${theme}.</p>
            `;

            // Populate outline section
            document.getElementById("outline-content").innerHTML = outlineHTML;
            document.getElementById("outline-section").classList.remove("hidden");

             // Hide the progress bar and horizontal navigation when the outline is displayed
             document.getElementById("progress-bar").classList.add("hidden");
             document.getElementById("question-nav").classList.add("hidden");
             currentQuestion = 0;
            // Generate Storyboard (Placeholder - Needs Backend Integration)
            generateStoryboard();
        }

        function editOutline(){
             document.getElementById("outline-section").classList.add("hidden");
             document.getElementById("question1").classList.remove("hidden");

             //reset progress counter;
             currentQuestion = 1;
             updateProgressBar();
             document.getElementById("progress-bar").classList.remove("hidden");
             // Show the navigation buttons
             document.getElementById("question-nav").classList.remove("hidden");

             // Activate the current question button
             activateQuestionButton(1);

        }

         // JavaScript to handle the Story Helper Panel
        const storyHelperButton = document.getElementById('story-helper-button');
        const storyHelperPanel = document.getElementById('story-helper-panel');
        const closeHelperPanel = document.getElementById('close-helper-panel');

        storyHelperButton.addEventListener('click', () => {
            storyHelperPanel.classList.add('open');
        });

        closeHelperPanel.addEventListener('click', () => {
            storyHelperPanel.classList.remove('open');
        });
        // Mock function to simulate asking the helper (replace with actual API call)
        function askHelper(topic) {
            alert(`You asked for help with: ${topic}`);
            // Close the panel after asking for help
            storyHelperPanel.classList.remove('open');

            //Make API CALL to backend
        }

        function generateStoryboard() {
            // Placeholder: Replace with your logic to fetch storyboard data from backend
            // and display it as stick figures using geometric shapes and colors

            const storyboardData = [
                { scene: 1, description: "Character introduction", shapes: ["circle", "rectangle"], colors: ["blue", "gray"] },
                { scene: 2, description: "The character encounters a problem", shapes: ["triangle", "circle"], colors: ["red", "yellow"] },
                { scene: 3, description: "Resolution", shapes: ["square", "rectangle"], colors: ["green", "purple"] }
            ]; //Example
            let storyboardHTML = "";
            storyboardData.forEach(scene => {
                storyboardHTML += `<p>Scene ${scene.scene}: ${scene.description} - Shapes: ${scene.shapes.join(', ')} - Colors: ${scene.colors.join(', ')}</p>`;
            });

            document.getElementById("storyboard-area").innerHTML = storyboardHTML;

            // Replace this with your actual storyboard generation code
            // (using geometric shapes and colors).
        }

    </script>

</body>
</html>